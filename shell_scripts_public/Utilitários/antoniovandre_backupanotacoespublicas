#!/bin/bash

# Proprietário: Antonio Vandré Pedrosa Furtunato Gomes.

# Script de backup de anotações públicas.

# Última atualização: 13-10-2024. Não considerando alterações em variáveis globais.

if ! [ -n "$AVENV" ]; then echo -ne "Carregando variáveis de ambiente... "; if ! source "${HOME}/shell_scripts/Utilitários/antoniovandre_env" &>> /dev/null; then echo -e "Ocorreu um erro.\n"; else echo -e "${AV_VERDE}Ok${AV_SEMCOR}.\n"; fi; fi

if ! [ -n "$AVCORES" ]; then echo -ne "Carregando antoniovandre_cores... "; if ! source "${BASHSCRIPTS}antoniovandre_cores" &>> /dev/null; then echo -e "Ocorreu um erro.\n"; else echo -e "${AV_VERDE}Ok${AV_SEMCOR}.\n"; fi; fi

if ! antoniovandre_verificarinternet_1 &>> /dev/null; then echo -e "${AV_VERMELHO}Sem conexão com a internet${AV_SEMCOR}."; exit 1; fi

if ! hash dbxcli-linux-amd64; then echo -e "${AV_VERMELHO}Software \"dbxcli-linux-amd64\" não encontrado${AV_SEMCOR}."; exit 1; fi

if [ "${1}" != "f" ]; then

dbxcli-linux-amd64 get "/Legado ontológico/antoniovandre-anotações_públicas-5.txt" "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt.tmp"

if ! ls -al "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt" &>> /dev/null; then cp "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt.tmp" "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt"; else if [[ $(ls -al "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt.tmp" | cut -d ' ' -f 5 | tr -d '\n') -gt $(ls -al "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt" | cut -d ' ' -f 5 | tr -d '\n') ]]; then cp "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt" "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt.bak"; cp "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt.tmp" "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt"; else if [[ $(ls -al "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt.tmp" | cut -d ' ' -f 5 | tr -d '\n') != $(ls -al "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt" | cut -d ' ' -f 5 | tr -d '\n') ]]; then dbxcli-linux-amd64 put "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt" "/Legado ontológico/antoniovandre-anotações_públicas-5.txt"; dbxcli-linux-amd64 put "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt" "/Documents/BACKUPED14/antoniovandre-anotações_públicas-5.txt"; fi; fi; fi

else

if ls -al "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt" &>> /dev/null; then dbxcli-linux-amd64 put "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt" "/Legado ontológico/antoniovandre-anotações_públicas-5.txt"; dbxcli-linux-amd64 put "${HOME}/Documentos/antoniovandre-anotações_públicas-5.txt" "/Documents/BACKUPED14/antoniovandre-anotações_públicas-5.txt"; else echo -e "${AV_VERMELHO}antoniovandre-anotações_públicas-5.txt não encontrado${AV_SEMCOR}."; fi

fi
